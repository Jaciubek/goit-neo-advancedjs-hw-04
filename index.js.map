{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '28421510-bfe8297e886d2caaf1b8bcf7e';\n\nfunction getImg(searchValue, page = 1, perPage = 15) {\n  const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q: searchValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page, // Numer strony do paginacji\n    per_page: perPage, // Ilość obrazków na stronę\n  });\n\n  return fetch(`https://pixabay.com/api/?${searchParams.toString()}`).then(\n    res => {\n      if (!res.ok) {\n        throw new Error(res.status);\n      }\n\n      return res.json();\n    }\n  );\n}\n\nexport { getImg };","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet galleryLightbox;\n\nfunction createCardsMarkup(cards, append = false) {\n  const cartItem = cards\n    .map(\n      ({\n        tags,\n        webformatURL,\n        largeImageURL,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-card\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"values-container\">\n                <ul class=\"labels\">\n                    <li>Likes</li>\n                    <li>${likes}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Views</li>\n                    <li>${views}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Comments</li>\n                    <li>${comments}</li>\n                </ul>\n                <ul class=\"labels\">\n                    <li>Downloads</li>\n                    <li>${downloads}</li>\n                </ul>\n            </div>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  loadSimpleLitebox(cartItem, append);\n}\n\nfunction loadSimpleLitebox(cartItem, append) {\n  const gallery = document.querySelector('ul.images-div');\n\n  if (append) {\n    // Dokładamy nowe elementy do istniejącej galerii\n    gallery.insertAdjacentHTML('beforeend', cartItem);\n  } else {\n    // Zastępujemy istniejącą galerię nowymi elementami\n    gallery.innerHTML = cartItem;\n  }\n\n  // Odświeżenie SimpleLightbox lub inicjalizacja\n  if (galleryLightbox) {\n    galleryLightbox.refresh();\n  } else {\n    galleryLightbox = new SimpleLightbox('.images-div a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}\n\nexport { createCardsMarkup };","import { getImg } from './js/pixabay-api';\nimport { createCardsMarkup } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst fetchUsersButton = document.querySelector('button[type=submit]');\nconst imgs = document.querySelector('.images-div');\nconst loaderClass = document.querySelector('.loaderClass');\n\n// Added a Load More button\nconst loadMoreButton = document.createElement('button');\nloadMoreButton.textContent = 'Load more';\nloadMoreButton.style.display = 'none'; // Hidden at the beginning\nloadMoreButton.classList.add('load-more');\nimgs.insertAdjacentElement('afterend', loadMoreButton);\n\nlet searchValue = '';\nlet currentPage = 1;\nconst perPage = 15; // Number of images per page\n\nfetchUsersButton.addEventListener('click', handleSearch);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nfunction handleSearch(e) {\n  e.preventDefault();\n  const searchInput = document.querySelector('input[name=\"search\"]');\n  const notFoundTextEl = document.querySelector('.not-found-img');\n\n  searchValue = searchInput.value.trim();\n  currentPage = 1; // Pagination reset\n\n  if (searchValue === '') {\n    iziToast.show({\n      title: '❌',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      color: 'ef4040',\n    });\n    return;\n  }\n\n  imgs.innerHTML = ''; // Clearing previous results\n  notFoundTextEl.innerHTML = '';\n  loaderClass.style.display = 'flex';\n  loadMoreButton.style.display = 'none'; // Hide Load More from loading\n\n  getImg(searchValue, currentPage, perPage)\n    .then(data => {\n      if (data.totalHits === 0) {\n        notFoundTextEl.innerHTML = `Results for query <span>${searchValue}</span> not found!`;\n        iziToast.show({\n          title: '❌',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#ef4040',\n          messageColor: 'white',\n        });\n        return;\n      }\n\n      createCardsMarkup(data.hits);\n\n      if (data.totalHits > perPage) {\n        loadMoreButton.style.display = 'block'; // Show Load More\n      }\n    })\n    .catch(console.error)\n    .finally(() => {\n      loaderClass.style.display = 'none';\n    });\n\n  searchInput.value = '';\n}\n\nfunction handleLoadMore() {\n  currentPage += 1; // Go to the next page\n  loaderClass.style.display = 'flex';\n  loadMoreButton.style.display = 'none'; // Hide button while loading\n\n  getImg(searchValue, currentPage, perPage)\n    .then(data => {\n      createCardsMarkup(data.hits, true); // Add new photos instead of clearing the gallery\n\n      const totalPages = Math.ceil(data.totalHits / perPage);\n      if (currentPage >= totalPages) {\n        loadMoreButton.style.display = 'none'; // Hide the button when you reach the end\n        iziToast.show({\n          title: 'ℹ️',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#4E75FF',\n          messageColor: 'white',\n        });\n      } else {\n        loadMoreButton.style.display = 'block';\n      }\n    })\n    .catch(console.error)\n    .finally(() => {\n      loaderClass.style.display = 'none';\n    });\n}"],"names":["API_KEY","getImg","searchValue","page","perPage","searchParams","res","galleryLightbox","createCardsMarkup","cards","append","cartItem","tags","webformatURL","largeImageURL","likes","views","comments","downloads","loadSimpleLitebox","gallery","SimpleLightbox","fetchUsersButton","imgs","loaderClass","loadMoreButton","currentPage","handleSearch","handleLoadMore","e","searchInput","notFoundTextEl","iziToast","data","totalPages"],"mappings":"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"}